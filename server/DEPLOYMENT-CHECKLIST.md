# Horse å‘ç”Ÿ - éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### ç¯å¢ƒå‡†å¤‡

- [ ] **æœåŠ¡å™¨è¦æ±‚**
  - [ ] Node.js >= 16.0.0
  - [ ] npm >= 8.0.0
  - [ ] è‡³å°‘ 1GB RAM
  - [ ] è‡³å°‘ 10GB ç£ç›˜ç©ºé—´
  - [ ] Ubuntu 20.04+ / CentOS 7+ / Debian 10+

- [ ] **åŸŸåå’Œ DNS**
  - [ ] åŸŸåå·²æ³¨å†Œ
  - [ ] DNS A è®°å½•æŒ‡å‘æœåŠ¡å™¨ IP
  - [ ] DNS è§£æç”Ÿæ•ˆï¼ˆä½¿ç”¨ `nslookup` éªŒè¯ï¼‰

- [ ] **SSL è¯ä¹¦**
  - [ ] è¯ä¹¦å·²ç”³è¯·ï¼ˆLet's Encrypt æˆ–å…¶ä»–ï¼‰
  - [ ] è¯ä¹¦æ–‡ä»¶å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
  - [ ] è¯ä¹¦è·¯å¾„é…ç½®æ­£ç¡®

---

## ğŸ”§ ä»£ç å‡†å¤‡

### å‰ç«¯æ„å»º

- [ ] **ä¾èµ–å®‰è£…**
  ```bash
  npm install
  ```

- [ ] **ç¯å¢ƒå˜é‡é…ç½®**
  - [ ] æ£€æŸ¥ `.env` æ–‡ä»¶
  - [ ] ç¡®è®¤ API ç«¯ç‚¹é…ç½®
  - [ ] ç¡®è®¤åˆçº¦åœ°å€é…ç½®

- [ ] **æ„å»ºå‰ç«¯**
  ```bash
  npm run build
  ```

- [ ] **éªŒè¯æ„å»ºäº§ç‰©**
  - [ ] `dist/` ç›®å½•å­˜åœ¨
  - [ ] `dist/index.html` å­˜åœ¨
  - [ ] é™æ€èµ„æºå®Œæ•´

### æœåŠ¡å™¨é…ç½®

- [ ] **æœåŠ¡å™¨ä¾èµ–**
  ```bash
  cd server
  npm install --production
  ```

- [ ] **ç¯å¢ƒå˜é‡**
  - [ ] å¤åˆ¶ `.env.example` åˆ° `.env`
  - [ ] é…ç½® `PORT`
  - [ ] é…ç½® `NODE_ENV=production`
  - [ ] é…ç½® `DOMAIN`

- [ ] **æ–‡ä»¶æƒé™**
  ```bash
  chmod +x *.sh
  chmod 600 .env
  ```

---

## ğŸš€ éƒ¨ç½²æ‰§è¡Œ

### æ–¹æ³• 1: è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

- [ ] **è¿è¡Œéƒ¨ç½²è„šæœ¬**
  ```bash
  ./deploy.sh
  ```

- [ ] **éªŒè¯éƒ¨ç½²**
  ```bash
  pm2 status
  curl http://localhost:3000/health
  ```

### æ–¹æ³• 2: Docker éƒ¨ç½²

- [ ] **æ„å»ºé•œåƒ**
  ```bash
  docker-compose build
  ```

- [ ] **å¯åŠ¨å®¹å™¨**
  ```bash
  docker-compose up -d
  ```

- [ ] **éªŒè¯å®¹å™¨**
  ```bash
  docker-compose ps
  docker-compose logs
  ```

### æ–¹æ³• 3: æ‰‹åŠ¨éƒ¨ç½²

- [ ] **å¯åŠ¨åº”ç”¨**
  ```bash
  pm2 start ecosystem.config.json
  pm2 save
  ```

- [ ] **é…ç½®å¼€æœºè‡ªå¯**
  ```bash
  pm2 startup
  ```

---

## ğŸŒ Nginx é…ç½®

- [ ] **å®‰è£… Nginx**
  ```bash
  sudo apt-get install nginx
  ```

- [ ] **å¤åˆ¶é…ç½®æ–‡ä»¶**
  ```bash
  sudo cp nginx.conf /etc/nginx/sites-available/horse-app
  sudo ln -s /etc/nginx/sites-available/horse-app /etc/nginx/sites-enabled/
  ```

- [ ] **æµ‹è¯•é…ç½®**
  ```bash
  sudo nginx -t
  ```

- [ ] **é‡å¯ Nginx**
  ```bash
  sudo systemctl restart nginx
  ```

- [ ] **é…ç½®å¼€æœºè‡ªå¯**
  ```bash
  sudo systemctl enable nginx
  ```

---

## ğŸ”’ å®‰å…¨é…ç½®

### é˜²ç«å¢™

- [ ] **é…ç½® UFW**
  ```bash
  sudo ufw allow 22/tcp
  sudo ufw allow 80/tcp
  sudo ufw allow 443/tcp
  sudo ufw enable
  ```

### SSH å®‰å…¨

- [ ] **ç¦ç”¨ root ç™»å½•**
  - [ ] ç¼–è¾‘ `/etc/ssh/sshd_config`
  - [ ] è®¾ç½® `PermitRootLogin no`
  - [ ] é‡å¯ SSH: `sudo systemctl restart sshd`

- [ ] **ä½¿ç”¨å¯†é’¥è®¤è¯**
  - [ ] ç”Ÿæˆ SSH å¯†é’¥
  - [ ] ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨
  - [ ] ç¦ç”¨å¯†ç ç™»å½•

### åº”ç”¨å®‰å…¨

- [ ] **ç¯å¢ƒå˜é‡å®‰å…¨**
  - [ ] `.env` ä¸åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­
  - [ ] `.env` æ–‡ä»¶æƒé™ 600

- [ ] **ä¾èµ–å®‰å…¨**
  ```bash
  npm audit
  npm audit fix
  ```

---

## âœ… åŠŸèƒ½æµ‹è¯•

### åŸºç¡€åŠŸèƒ½

- [ ] **å¥åº·æ£€æŸ¥**
  ```bash
  curl https://yourdomain.com/health
  ```
  é¢„æœŸ: `{"status":"ok",...}`

- [ ] **ä¸»é¡µè®¿é—®**
  ```bash
  curl -I https://yourdomain.com/
  ```
  é¢„æœŸ: HTTP 200

- [ ] **OG å›¾ç‰‡**
  ```bash
  curl -I https://yourdomain.com/api/og?type=default
  ```
  é¢„æœŸ: HTTP 200 æˆ– 302

### æ€§èƒ½æµ‹è¯•

- [ ] **å“åº”æ—¶é—´**
  ```bash
  ./performance-test.sh
  ```
  é¢„æœŸ: < 500ms

- [ ] **å¹¶å‘æµ‹è¯•**
  ```bash
  ab -n 100 -c 10 https://yourdomain.com/health
  ```

### SSL æµ‹è¯•

- [ ] **HTTPS è®¿é—®**
  ```bash
  curl -I https://yourdomain.com/
  ```

- [ ] **SSL è¯„çº§**
  - [ ] è®¿é—® https://www.ssllabs.com/ssltest/
  - [ ] è¾“å…¥åŸŸåæµ‹è¯•
  - [ ] é¢„æœŸè¯„çº§: A æˆ– A+

---

## ğŸ“Š ç›‘æ§é…ç½®

### PM2 ç›‘æ§

- [ ] **æŸ¥çœ‹çŠ¶æ€**
  ```bash
  pm2 status
  pm2 monit
  ```

- [ ] **é…ç½®æ—¥å¿—**
  - [ ] æ—¥å¿—ç›®å½•å­˜åœ¨: `logs/`
  - [ ] æ—¥å¿—è½®è½¬é…ç½®

### ç³»ç»Ÿç›‘æ§

- [ ] **å®‰è£…ç›‘æ§å·¥å…·**
  ```bash
  sudo apt-get install htop
  ```

- [ ] **é…ç½®å‘Šè­¦**ï¼ˆå¯é€‰ï¼‰
  - [ ] é‚®ä»¶å‘Šè­¦
  - [ ] Slack é€šçŸ¥
  - [ ] çŸ­ä¿¡å‘Šè­¦

---

## ğŸ”„ è‡ªåŠ¨åŒ–ä»»åŠ¡

### Cron ä»»åŠ¡

- [ ] **é…ç½®å®šæ—¶ä»»åŠ¡**
  ```bash
  crontab -e
  ```

- [ ] **æ·»åŠ ä»»åŠ¡**
  - [ ] æ¯æ—¥å¤‡ä»½
  - [ ] æ¯å‘¨æ—¥å¿—æ¸…ç†
  - [ ] æ¯æœˆ SSL ç»­æœŸæ£€æŸ¥

### è‡ªåŠ¨é‡å¯

- [ ] **PM2 è‡ªåŠ¨é‡å¯**
  - [ ] é…ç½® `autorestart: true`
  - [ ] é…ç½® `max_restarts`

---

## ğŸ“ æ–‡æ¡£å’Œè®°å½•

### éƒ¨ç½²æ–‡æ¡£

- [ ] **è®°å½•éƒ¨ç½²ä¿¡æ¯**
  - [ ] æœåŠ¡å™¨ IP
  - [ ] åŸŸå
  - [ ] éƒ¨ç½²æ—¥æœŸ
  - [ ] Node.js ç‰ˆæœ¬
  - [ ] åº”ç”¨ç‰ˆæœ¬

- [ ] **åˆ›å»ºè¿ç»´æ–‡æ¡£**
  - [ ] å¸¸ç”¨å‘½ä»¤
  - [ ] æ•…éšœæ’æŸ¥æ­¥éª¤
  - [ ] è”ç³»æ–¹å¼

### å¤‡ä»½

- [ ] **é¦–æ¬¡å¤‡ä»½**
  ```bash
  ./backup.sh
  ```

- [ ] **éªŒè¯å¤‡ä»½**
  - [ ] å¤‡ä»½æ–‡ä»¶å­˜åœ¨
  - [ ] å¤‡ä»½æ–‡ä»¶å®Œæ•´

---

## ğŸ‰ éƒ¨ç½²å®Œæˆ

### æœ€ç»ˆéªŒè¯

- [ ] **è®¿é—®ä¸»é¡µ**
  - [ ] https://yourdomain.com
  - [ ] é¡µé¢æ­£å¸¸æ˜¾ç¤º

- [ ] **æµ‹è¯•åŠŸèƒ½**
  - [ ] è¿æ¥é’±åŒ…
  - [ ] æŠ½å¥–åŠŸèƒ½
  - [ ] åˆ†äº«åŠŸèƒ½

- [ ] **æ£€æŸ¥æ—¥å¿—**
  ```bash
  pm2 logs horse-app --lines 50
  ```
  é¢„æœŸ: æ— é”™è¯¯

### é€šçŸ¥å›¢é˜Ÿ

- [ ] **å‘é€éƒ¨ç½²é€šçŸ¥**
  - [ ] éƒ¨ç½²å®Œæˆæ—¶é—´
  - [ ] è®¿é—®åœ°å€
  - [ ] å·²çŸ¥é—®é¢˜ï¼ˆå¦‚æœ‰ï¼‰

---

## ğŸ“ éƒ¨ç½²åæ”¯æŒ

### ç›‘æ§

- [ ] **ç¬¬ä¸€å¤©**: æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
- [ ] **ç¬¬ä¸€å‘¨**: æ¯å¤©æ£€æŸ¥ä¸€æ¬¡
- [ ] **ä¹‹å**: æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡

### ç»´æŠ¤

- [ ] **æ¯å‘¨**
  - [ ] æŸ¥çœ‹æ—¥å¿—
  - [ ] æ£€æŸ¥ç£ç›˜ç©ºé—´
  - [ ] è¿è¡Œ `./monitor.sh`

- [ ] **æ¯æœˆ**
  - [ ] æ›´æ–°ä¾èµ–
  - [ ] å®‰å…¨å®¡è®¡
  - [ ] æ€§èƒ½æµ‹è¯•

---

## ğŸ› å¸¸è§é—®é¢˜

### éƒ¨ç½²å¤±è´¥

**é—®é¢˜**: éƒ¨ç½²è„šæœ¬æ‰§è¡Œå¤±è´¥

**è§£å†³**:
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
./deploy.sh 2>&1 | tee deploy.log

# æ‰‹åŠ¨æ‰§è¡Œæ¯ä¸€æ­¥
cd server && npm install
cd .. && npm run build
cd server && pm2 start ecosystem.config.json
```

### ç«¯å£è¢«å ç”¨

**é—®é¢˜**: ç«¯å£ 3000 å·²è¢«å ç”¨

**è§£å†³**:
```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i :3000

# ä¿®æ”¹ç«¯å£
# ç¼–è¾‘ .env: PORT=3001
```

### SSL è¯ä¹¦é—®é¢˜

**é—®é¢˜**: HTTPS æ— æ³•è®¿é—®

**è§£å†³**:
```bash
# æ£€æŸ¥è¯ä¹¦
sudo certbot certificates

# é‡æ–°ç”³è¯·
sudo certbot certonly --standalone -d yourdomain.com
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](README.md) - å®Œæ•´æ–‡æ¡£
- [QUICKSTART.md](QUICKSTART.md) - å¿«é€Ÿå¼€å§‹
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - æ•…éšœæ’æŸ¥
- [SECURITY.md](SECURITY.md) - å®‰å…¨æŒ‡å—
- [API.md](API.md) - API æ–‡æ¡£

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ•…éšœæ’æŸ¥æ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚
