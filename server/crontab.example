# Horse 发生 - Cron 任务配置
# 用法: crontab -e 然后添加以下内容

# 每天凌晨 2 点备份
0 2 * * * cd /var/www/horse-app/server && ./backup.sh >> logs/backup.log 2>&1

# 每周日凌晨 3 点清理日志
0 3 * * 0 cd /var/www/horse-app/server && ./cleanup-logs.sh 7 >> logs/cleanup.log 2>&1

# 每月 1 号检查 SSL 证书
0 0 1 * * cd /var/www/horse-app/server && ./ssl-renew.sh >> logs/ssl-renew.log 2>&1

# 每小时监控服务器状态（可选）
# 0 * * * * cd /var/www/horse-app/server && ./monitor.sh >> logs/monitor.log 2>&1

# 每天凌晨 4 点重启应用（可选，用于释放内存）
# 0 4 * * * cd /var/www/horse-app/server && pm2 restart horse-app

# 每 5 分钟检查服务器是否运行，如果停止则自动启动
*/5 * * * * cd /var/www/horse-app/server && pm2 ping horse-app || pm2 start ecosystem.config.json

# 说明:
# 分 时 日 月 周
# *  *  *  *  *
# |  |  |  |  |
# |  |  |  |  +---- 星期几 (0-7, 0和7都代表周日)
# |  |  |  +------- 月份 (1-12)
# |  |  +---------- 日期 (1-31)
# |  +------------- 小时 (0-23)
# +---------------- 分钟 (0-59)

# 安装方法:
# 1. 编辑 crontab: crontab -e
# 2. 复制上面的任务到文件中
# 3. 保存并退出
# 4. 查看已安装的任务: crontab -l
# 5. 查看 cron 日志: grep CRON /var/log/syslog
